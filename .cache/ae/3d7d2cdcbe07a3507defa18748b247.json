{"id":"../../../node_modules/requestify/lib/cache.js","dependencies":[{"name":"/Users/orgil/Documents/repos/erxes-integrations/package.json","includedInParent":true,"mtime":1561536660677},{"name":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/requestify/package.json","includedInParent":true,"mtime":1560144337713},{"name":"q","loc":{"line":4,"column":16},"parent":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/requestify/lib/cache.js","resolved":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/q/q.js"},{"name":"./interface-validator","loc":{"line":5,"column":33},"parent":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/requestify/lib/cache.js","resolved":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/requestify/lib/interface-validator.js"},{"name":"./cache-transporters/in-memory-transporter","loc":{"line":6,"column":34},"parent":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/requestify/lib/cache.js","resolved":"/Users/orgil/Documents/repos/erxes-integrations/node_modules/requestify/lib/cache-transporters/in-memory-transporter.js"}],"generated":{"js":"/**\n * Module dependencies\n */\nvar Q = require('q'),\n    interfaceValidator = require('./interface-validator'),\n    inMemoryTransporter = require('./cache-transporters/in-memory-transporter');\n/**\n * Http Cache manager for requestify\n */\n\n\nvar Cache = function () {\n  'use strict';\n  /**\n   * Cache transporter instance\n   * @default inMemory\n   * @type {{ get: function, set: function, purge: function }}\n   */\n\n  var transport = inMemoryTransporter(),\n\n  /**\n   * Mandatory public methods for the transport interface\n   * @type {array}\n   */\n  transportInterface = ['get', 'set', 'purge'];\n  /**\n   * Handles transporter callback\n   * @param {Q.defer} defer\n   * @returns {Function}\n   */\n\n  function callbackHandler(defer) {\n    return function (error, data) {\n      if (error) {\n        defer.reject(error);\n        return;\n      }\n\n      if (!data) {\n        defer.resolve();\n        return;\n      }\n\n      defer.resolve(data);\n    };\n  }\n  /**\n   * Executes transport method with given params\n   * @param {string} method\n   * @param {string} url\n   * @param {{code: number, body: string, headers: object}} response\n   * @returns {Q.promise}\n   */\n\n\n  function transportExecute(method, url, response) {\n    var defer = Q.defer();\n\n    if (response) {\n      transport[method](url, response, callbackHandler(defer));\n      return defer.promise;\n    }\n\n    transport[method](url, callbackHandler(defer));\n    return defer.promise;\n  }\n\n  return {\n    /**\n     * Sets cache by resource URL\n     * @param {string} url\n     * @param {{code: number, body: string, headers: object}} response\n     * @returns {Q.promise}\n     */\n    set: function (url, response) {\n      return transportExecute('set', url, response);\n    },\n\n    /**\n     * Returns cache by resource URL\n     * @param {string} url\n     * @returns {Q.promise}\n     */\n    get: function (url) {\n      return transportExecute('get', url);\n    },\n\n    /**\n     * Purges a specific cache by URL\n     * @param url\n     * @returns {Q.promise}\n     */\n    purge: function (url) {\n      return transportExecute('purge', url);\n    },\n\n    /**\n     * Sets redis client\n     * @param {{ get: function, set: function, purge: function }} cacheTransporter\n     * @returns {Cache}\n     */\n    setCacheTransporter: function (cacheTransporter) {\n      interfaceValidator.validate('CacheTransporter', cacheTransporter, transportInterface);\n      transport = cacheTransporter;\n      return this;\n    },\n\n    /**\n     * Determines if transport is currently available for use\n     * @returns {boolean}\n     */\n    isTransportAvailable: function () {\n      return transport !== null;\n    }\n  };\n}();\n\nmodule.exports = Cache;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":1,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":1,"column":0}},{"generated":{"line":4,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":0}},{"name":"Q","generated":{"line":4,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":4}},{"generated":{"line":4,"column":5},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":5}},{"name":"require","generated":{"line":4,"column":8},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":8}},{"generated":{"line":4,"column":15},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":15}},{"generated":{"line":4,"column":16},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":16}},{"generated":{"line":4,"column":19},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":15}},{"generated":{"line":4,"column":20},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":0}},{"generated":{"line":5,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":0}},{"name":"interfaceValidator","generated":{"line":5,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":5,"column":4}},{"generated":{"line":5,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":5,"column":22}},{"name":"require","generated":{"line":5,"column":25},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":5,"column":25}},{"generated":{"line":5,"column":32},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":5,"column":32}},{"generated":{"line":5,"column":33},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":5,"column":33}},{"generated":{"line":5,"column":56},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":5,"column":32}},{"generated":{"line":5,"column":57},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":0}},{"generated":{"line":6,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":0}},{"name":"inMemoryTransporter","generated":{"line":6,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":6,"column":4}},{"generated":{"line":6,"column":23},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":6,"column":23}},{"name":"require","generated":{"line":6,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":6,"column":26}},{"generated":{"line":6,"column":33},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":6,"column":33}},{"generated":{"line":6,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":6,"column":34}},{"generated":{"line":6,"column":78},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":6,"column":33}},{"generated":{"line":6,"column":79},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":4,"column":0}},{"generated":{"line":7,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":8,"column":0}},{"generated":{"line":12,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":0}},{"name":"Cache","generated":{"line":12,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":4}},{"generated":{"line":12,"column":9},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":9}},{"generated":{"line":12,"column":12},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":13}},{"generated":{"line":12,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":24}},{"generated":{"line":13,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":12,"column":4}},{"generated":{"line":14,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":14,"column":4}},{"generated":{"line":20,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":4}},{"name":"transport","generated":{"line":20,"column":6},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":8}},{"generated":{"line":20,"column":15},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":17}},{"name":"inMemoryTransporter","generated":{"line":20,"column":18},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":20}},{"generated":{"line":20,"column":37},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":39}},{"generated":{"line":20,"column":39},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":4}},{"generated":{"line":22,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":21,"column":8}},{"name":"transportInterface","generated":{"line":26,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":8}},{"name":"transportInterface","generated":{"line":26,"column":2},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":8}},{"generated":{"line":26,"column":20},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":26}},{"generated":{"line":26,"column":23},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":29}},{"generated":{"line":26,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":26,"column":12}},{"generated":{"line":26,"column":29},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":29}},{"generated":{"line":26,"column":31},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":27,"column":12}},{"generated":{"line":26,"column":36},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":29}},{"generated":{"line":26,"column":38},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":28,"column":12}},{"generated":{"line":26,"column":45},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":25,"column":29}},{"generated":{"line":26,"column":46},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":19,"column":4}},{"generated":{"line":27,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":31,"column":4}},{"generated":{"line":33,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":36,"column":4}},{"name":"callbackHandler","generated":{"line":33,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":36,"column":13}},{"generated":{"line":33,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":36,"column":4}},{"name":"defer","generated":{"line":33,"column":27},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":36,"column":29}},{"generated":{"line":33,"column":32},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":36,"column":4}},{"generated":{"line":33,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":36,"column":36}},{"generated":{"line":34,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":8}},{"generated":{"line":34,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":15}},{"name":"error","generated":{"line":34,"column":21},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":24}},{"generated":{"line":34,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":15}},{"name":"data","generated":{"line":34,"column":28},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":31}},{"generated":{"line":34,"column":32},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":15}},{"generated":{"line":34,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":37}},{"generated":{"line":35,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":38,"column":12}},{"name":"error","generated":{"line":35,"column":10},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":38,"column":16}},{"generated":{"line":35,"column":15},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":38,"column":12}},{"generated":{"line":35,"column":17},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":38,"column":23}},{"name":"defer","generated":{"line":36,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":16}},{"name":"defer","generated":{"line":36,"column":8},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":16}},{"generated":{"line":36,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":21}},{"name":"reject","generated":{"line":36,"column":14},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":22}},{"generated":{"line":36,"column":20},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":16}},{"name":"error","generated":{"line":36,"column":21},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":29}},{"generated":{"line":36,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":39,"column":16}},{"generated":{"line":37,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":40,"column":16}},{"generated":{"line":38,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":41,"column":13}},{"generated":{"line":40,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":43,"column":12}},{"generated":{"line":40,"column":10},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":43,"column":16}},{"name":"data","generated":{"line":40,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":43,"column":17}},{"generated":{"line":40,"column":15},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":43,"column":12}},{"generated":{"line":40,"column":17},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":43,"column":23}},{"name":"defer","generated":{"line":41,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":44,"column":16}},{"name":"defer","generated":{"line":41,"column":8},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":44,"column":16}},{"generated":{"line":41,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":44,"column":21}},{"name":"resolve","generated":{"line":41,"column":14},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":44,"column":22}},{"generated":{"line":41,"column":21},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":44,"column":16}},{"generated":{"line":42,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":45,"column":16}},{"generated":{"line":43,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":46,"column":13}},{"name":"defer","generated":{"line":45,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":12}},{"name":"defer","generated":{"line":45,"column":6},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":12}},{"generated":{"line":45,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":17}},{"name":"resolve","generated":{"line":45,"column":12},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":18}},{"generated":{"line":45,"column":19},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":12}},{"name":"data","generated":{"line":45,"column":20},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":26}},{"generated":{"line":45,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":48,"column":12}},{"generated":{"line":46,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":49,"column":9}},{"generated":{"line":46,"column":5},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":37,"column":8}},{"generated":{"line":47,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":50,"column":5}},{"generated":{"line":48,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":52,"column":4}},{"generated":{"line":57,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":4}},{"name":"transportExecute","generated":{"line":57,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":13}},{"generated":{"line":57,"column":27},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":4}},{"name":"method","generated":{"line":57,"column":28},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":30}},{"generated":{"line":57,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":4}},{"name":"url","generated":{"line":57,"column":36},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":38}},{"generated":{"line":57,"column":39},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":4}},{"name":"response","generated":{"line":57,"column":41},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":43}},{"generated":{"line":57,"column":49},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":4}},{"generated":{"line":57,"column":51},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":59,"column":53}},{"generated":{"line":58,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":8}},{"name":"defer","generated":{"line":58,"column":8},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":12}},{"generated":{"line":58,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":17}},{"name":"Q","generated":{"line":58,"column":16},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":20}},{"generated":{"line":58,"column":17},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":21}},{"name":"defer","generated":{"line":58,"column":18},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":22}},{"generated":{"line":58,"column":23},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":20}},{"generated":{"line":58,"column":25},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":60,"column":8}},{"generated":{"line":60,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":62,"column":8}},{"name":"response","generated":{"line":60,"column":8},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":62,"column":12}},{"generated":{"line":60,"column":16},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":62,"column":8}},{"generated":{"line":60,"column":18},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":62,"column":22}},{"name":"transport","generated":{"line":61,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":12}},{"name":"transport","generated":{"line":61,"column":6},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":12}},{"generated":{"line":61,"column":15},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":21}},{"name":"method","generated":{"line":61,"column":16},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":22}},{"generated":{"line":61,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":21}},{"generated":{"line":61,"column":23},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":12}},{"name":"url","generated":{"line":61,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":30}},{"generated":{"line":61,"column":27},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":12}},{"name":"response","generated":{"line":61,"column":29},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":35}},{"generated":{"line":61,"column":37},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":12}},{"name":"callbackHandler","generated":{"line":61,"column":39},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":45}},{"generated":{"line":61,"column":54},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":60}},{"name":"defer","generated":{"line":61,"column":55},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":61}},{"generated":{"line":61,"column":60},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":60}},{"generated":{"line":61,"column":61},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":63,"column":12}},{"generated":{"line":62,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":64,"column":12}},{"name":"defer","generated":{"line":62,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":64,"column":19}},{"generated":{"line":62,"column":18},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":64,"column":24}},{"name":"promise","generated":{"line":62,"column":19},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":64,"column":25}},{"generated":{"line":62,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":64,"column":12}},{"generated":{"line":63,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":65,"column":9}},{"name":"transport","generated":{"line":65,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":8}},{"name":"transport","generated":{"line":65,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":8}},{"generated":{"line":65,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":17}},{"name":"method","generated":{"line":65,"column":14},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":18}},{"generated":{"line":65,"column":20},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":17}},{"generated":{"line":65,"column":21},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":8}},{"name":"url","generated":{"line":65,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":26}},{"generated":{"line":65,"column":25},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":8}},{"name":"callbackHandler","generated":{"line":65,"column":27},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":31}},{"generated":{"line":65,"column":42},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":46}},{"name":"defer","generated":{"line":65,"column":43},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":47}},{"generated":{"line":65,"column":48},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":46}},{"generated":{"line":65,"column":49},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":67,"column":8}},{"generated":{"line":66,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":69,"column":8}},{"name":"defer","generated":{"line":66,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":69,"column":15}},{"generated":{"line":66,"column":16},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":69,"column":20}},{"name":"promise","generated":{"line":66,"column":17},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":69,"column":21}},{"generated":{"line":66,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":69,"column":8}},{"generated":{"line":67,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":70,"column":5}},{"generated":{"line":69,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":4}},{"generated":{"line":69,"column":9},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":11}},{"generated":{"line":70,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":74,"column":8}},{"name":"set","generated":{"line":76,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":8}},{"name":"set","generated":{"line":76,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":8}},{"generated":{"line":76,"column":7},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":11}},{"generated":{"line":76,"column":9},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":13}},{"name":"url","generated":{"line":76,"column":19},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":22}},{"generated":{"line":76,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":13}},{"name":"response","generated":{"line":76,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":27}},{"generated":{"line":76,"column":32},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":13}},{"generated":{"line":76,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":80,"column":37}},{"generated":{"line":77,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":12}},{"name":"transportExecute","generated":{"line":77,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":19}},{"generated":{"line":77,"column":29},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":35}},{"generated":{"line":77,"column":30},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":36}},{"generated":{"line":77,"column":35},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":35}},{"name":"url","generated":{"line":77,"column":37},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":43}},{"generated":{"line":77,"column":40},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":35}},{"name":"response","generated":{"line":77,"column":42},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":48}},{"generated":{"line":77,"column":50},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":35}},{"generated":{"line":77,"column":51},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":81,"column":12}},{"generated":{"line":78,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":82,"column":9}},{"generated":{"line":78,"column":5},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":11}},{"generated":{"line":80,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":84,"column":8}},{"name":"get","generated":{"line":85,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":8}},{"name":"get","generated":{"line":85,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":8}},{"generated":{"line":85,"column":7},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":11}},{"generated":{"line":85,"column":9},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":13}},{"name":"url","generated":{"line":85,"column":19},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":22}},{"generated":{"line":85,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":13}},{"generated":{"line":85,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":89,"column":27}},{"generated":{"line":86,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":12}},{"name":"transportExecute","generated":{"line":86,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":19}},{"generated":{"line":86,"column":29},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":35}},{"generated":{"line":86,"column":30},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":36}},{"generated":{"line":86,"column":35},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":35}},{"name":"url","generated":{"line":86,"column":37},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":43}},{"generated":{"line":86,"column":40},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":35}},{"generated":{"line":86,"column":41},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":90,"column":12}},{"generated":{"line":87,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":91,"column":9}},{"generated":{"line":87,"column":5},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":11}},{"generated":{"line":89,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":93,"column":8}},{"name":"purge","generated":{"line":94,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":8}},{"name":"purge","generated":{"line":94,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":8}},{"generated":{"line":94,"column":9},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":13}},{"generated":{"line":94,"column":11},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":15}},{"name":"url","generated":{"line":94,"column":21},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":24}},{"generated":{"line":94,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":15}},{"generated":{"line":94,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":98,"column":29}},{"generated":{"line":95,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":12}},{"name":"transportExecute","generated":{"line":95,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":19}},{"generated":{"line":95,"column":29},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":35}},{"generated":{"line":95,"column":30},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":36}},{"generated":{"line":95,"column":37},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":35}},{"name":"url","generated":{"line":95,"column":39},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":45}},{"generated":{"line":95,"column":42},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":35}},{"generated":{"line":95,"column":43},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":99,"column":12}},{"generated":{"line":96,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":100,"column":9}},{"generated":{"line":96,"column":5},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":11}},{"generated":{"line":98,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":102,"column":8}},{"name":"setCacheTransporter","generated":{"line":103,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":8}},{"name":"setCacheTransporter","generated":{"line":103,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":8}},{"generated":{"line":103,"column":23},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":27}},{"generated":{"line":103,"column":25},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":29}},{"name":"cacheTransporter","generated":{"line":103,"column":35},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":38}},{"generated":{"line":103,"column":51},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":29}},{"generated":{"line":103,"column":53},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":107,"column":56}},{"name":"interfaceValidator","generated":{"line":104,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":12}},{"name":"interfaceValidator","generated":{"line":104,"column":6},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":12}},{"generated":{"line":104,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":30}},{"name":"validate","generated":{"line":104,"column":25},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":31}},{"generated":{"line":104,"column":33},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":12}},{"generated":{"line":104,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":40}},{"generated":{"line":104,"column":52},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":12}},{"name":"cacheTransporter","generated":{"line":104,"column":54},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":60}},{"generated":{"line":104,"column":70},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":12}},{"name":"transportInterface","generated":{"line":104,"column":72},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":78}},{"generated":{"line":104,"column":90},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":108,"column":12}},{"name":"transport","generated":{"line":105,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":109,"column":12}},{"name":"transport","generated":{"line":105,"column":6},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":109,"column":12}},{"generated":{"line":105,"column":15},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":109,"column":21}},{"name":"cacheTransporter","generated":{"line":105,"column":18},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":109,"column":24}},{"generated":{"line":105,"column":34},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":109,"column":12}},{"generated":{"line":106,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":111,"column":12}},{"generated":{"line":106,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":111,"column":19}},{"generated":{"line":106,"column":17},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":111,"column":12}},{"generated":{"line":107,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":112,"column":9}},{"generated":{"line":107,"column":5},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":11}},{"generated":{"line":109,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":114,"column":8}},{"name":"isTransportAvailable","generated":{"line":113,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":118,"column":8}},{"name":"isTransportAvailable","generated":{"line":113,"column":4},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":118,"column":8}},{"generated":{"line":113,"column":24},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":118,"column":28}},{"generated":{"line":113,"column":26},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":118,"column":30}},{"generated":{"line":113,"column":38},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":118,"column":41}},{"generated":{"line":114,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":119,"column":12}},{"name":"transport","generated":{"line":114,"column":13},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":119,"column":19}},{"generated":{"line":114,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":119,"column":28}},{"generated":{"line":114,"column":27},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":119,"column":33}},{"generated":{"line":114,"column":31},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":119,"column":12}},{"generated":{"line":115,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":120,"column":9}},{"generated":{"line":116,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":11}},{"generated":{"line":116,"column":3},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":72,"column":4}},{"generated":{"line":117,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":123,"column":1}},{"generated":{"line":117,"column":1},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":13}},{"generated":{"line":117,"column":3},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":11,"column":0}},{"name":"module","generated":{"line":119,"column":0},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":125,"column":0}},{"generated":{"line":119,"column":6},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":125,"column":6}},{"name":"exports","generated":{"line":119,"column":7},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":125,"column":7}},{"generated":{"line":119,"column":14},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":125,"column":0}},{"name":"Cache","generated":{"line":119,"column":17},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":125,"column":17}},{"generated":{"line":119,"column":22},"source":"../../../node_modules/requestify/lib/cache.js","original":{"line":125,"column":0}}],"sources":{"../../../node_modules/requestify/lib/cache.js":"/**\n * Module dependencies\n */\nvar Q = require('q'),\n    interfaceValidator = require('./interface-validator'),\n    inMemoryTransporter = require('./cache-transporters/in-memory-transporter');\n\n/**\n * Http Cache manager for requestify\n */\nvar Cache = (function() {\n    'use strict';\n\n    /**\n     * Cache transporter instance\n     * @default inMemory\n     * @type {{ get: function, set: function, purge: function }}\n     */\n    var transport = inMemoryTransporter(),\n\n        /**\n         * Mandatory public methods for the transport interface\n         * @type {array}\n         */\n        transportInterface = [\n            'get',\n            'set',\n            'purge'\n        ];\n\n    /**\n     * Handles transporter callback\n     * @param {Q.defer} defer\n     * @returns {Function}\n     */\n    function callbackHandler(defer) {\n        return function(error, data) {\n            if (error) {\n                defer.reject(error);\n                return;\n            }\n\n            if (!data) {\n                defer.resolve();\n                return;\n            }\n\n            defer.resolve(data);\n        };\n    }\n\n    /**\n     * Executes transport method with given params\n     * @param {string} method\n     * @param {string} url\n     * @param {{code: number, body: string, headers: object}} response\n     * @returns {Q.promise}\n     */\n    function transportExecute(method, url, response) {\n        var defer = Q.defer();\n\n        if (response) {\n            transport[method](url, response, callbackHandler(defer));\n            return defer.promise;\n        }\n\n        transport[method](url, callbackHandler(defer));\n\n        return defer.promise;\n    }\n\n    return {\n\n        /**\n         * Sets cache by resource URL\n         * @param {string} url\n         * @param {{code: number, body: string, headers: object}} response\n         * @returns {Q.promise}\n         */\n        set: function(url, response) {\n            return transportExecute('set', url, response);\n        },\n\n        /**\n         * Returns cache by resource URL\n         * @param {string} url\n         * @returns {Q.promise}\n         */\n        get: function(url) {\n            return transportExecute('get', url);\n        },\n\n        /**\n         * Purges a specific cache by URL\n         * @param url\n         * @returns {Q.promise}\n         */\n        purge: function(url) {\n            return transportExecute('purge', url);\n        },\n\n        /**\n         * Sets redis client\n         * @param {{ get: function, set: function, purge: function }} cacheTransporter\n         * @returns {Cache}\n         */\n        setCacheTransporter: function(cacheTransporter) {\n            interfaceValidator.validate('CacheTransporter', cacheTransporter, transportInterface);\n            transport = cacheTransporter;\n\n            return this;\n        },\n\n        /**\n         * Determines if transport is currently available for use\n         * @returns {boolean}\n         */\n        isTransportAvailable: function() {\n            return transport !== null;\n        }\n\n    };\n}());\n\nmodule.exports = Cache;"},"lineCount":null}},"error":null,"hash":"dbe2586dfc67c0ee65dfe3bacbb0c515","cacheData":{"env":{}}}